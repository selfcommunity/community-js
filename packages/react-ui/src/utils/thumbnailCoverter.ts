export const fallbackImage =
  'data:image/png;base64,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';

export function pdfToPng(url) {
  const pdfjsLib = require('pdfjs-dist/webpack');
  return new Promise(function (resolve, reject) {
    try {
      const canvas = document.createElement('canvas');
      const ctx = canvas.getContext('2d');
      // Load the PDF file
      pdfjsLib
        .getDocument(url)
        .promise.then((pdf) => {
          // Get the first page of the PDF
          return pdf.getPage(1);
        })
        .then((page) => {
          // Set the canvas dimensions to match the PDF page dimensions
          const viewport = page.getViewport({scale: 1});
          canvas.width = viewport.width;
          canvas.height = viewport.height;

          // Render the PDF page onto the canvas
          const renderContext = {
            canvasContext: ctx,
            viewport: viewport
          };
          return page.render(renderContext).promise;
        })
        .then(() => {
          // Convert the canvas to an image
          const thumbnailUrl = canvas.toDataURL('image/jpeg', 1);
          // Resolve the Promise with the generated value
          resolve(thumbnailUrl);
        });
    } catch (e) {
      reject(e);
      console.log(e);
    }
  });
}

export function createThumbnail(image) {
  return new Promise(function (resolve, reject) {
    try {
      const img = new Image();
      img.src = image;
      img.onload = function () {
        const canvas = document.createElement('canvas');
        const ctx = canvas.getContext('2d');
        // Get the current viewport dimensions
        let viewportWidth = window.innerWidth || document.documentElement.clientWidth;
        let viewportHeight = window.innerHeight || document.documentElement.clientHeight;
        // Set the canvas width and height to match the viewport
        canvas.width = viewportWidth;
        canvas.height = viewportHeight;
        // Draw the canvas
        ctx.drawImage(img, 0, 0, canvas.width, canvas.height);
        const thumbnailData = canvas.toDataURL('image/jpeg', 0.5);
        // Resolve the Promise with the generated value
        resolve(thumbnailData);
      };
      img.crossOrigin = '*';
    } catch (e) {
      reject(e);
      console.log(e);
    }
  });
}

export function createVideoThumbnail(file) {
  return new Promise(function (resolve, reject) {
    try {
      const video = document.createElement('video');
      video.src = file;
      video.crossOrigin = '*';
      video.load();
      video.addEventListener('loadeddata', function () {
        const canvas = document.createElement('canvas');
        // Get the current viewport dimensions
        let viewportWidth = window.innerWidth || document.documentElement.clientWidth;
        let viewportHeight = window.innerHeight || document.documentElement.clientHeight;
        // Set the canvas width and height to match the viewport
        canvas.width = viewportWidth;
        canvas.height = viewportHeight;
        const ctx = canvas.getContext('2d');
        // Draw the canvas
        ctx.drawImage(video, 0, 0, canvas.width, canvas.height);
        const thumbnailUrl = canvas.toDataURL('image/jpeg', 0.5);
        // Resolve the Promise with the generated value
        resolve(thumbnailUrl);
      });
    } catch (e) {
      reject(e);
      console.log(e);
    }
  });
}

export function dataURLtoFile(dataUrl, fileName) {
  let arr = dataUrl.split(','),
    mime = arr[0].match(/:(.*?);/)[1],
    bstr = atob(arr[1]),
    n = bstr.length,
    u8arr = new Uint8Array(n);
  const _fileName = fileName.endsWith('.pdf') ? fileName.replace(/\.pdf$/, '.jpeg') : fileName;

  while (n--) {
    u8arr[n] = bstr.charCodeAt(n);
  }
  return new File([u8arr], _fileName, {type: mime});
}
